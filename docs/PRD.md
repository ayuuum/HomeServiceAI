# 製品要求仕様書 (PRD)

## 1. プロジェクト概要
**プロジェクト名**: Haukuri Pro (ハウクリPro)
**目的**: サービス予約管理プロセスの効率化、顧客体験の向上、および業務運営の最適化を実現する、モダンで高機能な予約管理システムを構築・運用する。主にハウスクリーニング等の訪問サービス事業者をターゲットとする。

## 2. ターゲットユーザー (ユーザーペルソナ)

| ロール | 説明 | 主なユースケース |
| :--- | :--- | :--- |
| **管理者 (Admin)** | システム全体の管理権限を持つユーザー（本部・店舗オーナー）。 | 売上確認、全予約の管理、スタッフ管理、サービスメニュー編集、設定変更。 |
| **スタッフ (Staff)** | 現場でサービスを提供する担当者。 | 自身のスケジュール確認、予約詳細の確認、作業完了報告。 |
| **顧客 (Customer)** | サービスを利用する一般ユーザー。 | サービスの検索・予約、予約履歴の確認、プロフィール管理、ログイン（LINE/Google含む）。 |

## 3. 機能要件

### 3.1 認証・ユーザー管理
*   **サインアップ/ログイン**: メールアドレス・パスワードによる登録・認証。
*   **ソーシャルログイン**: GoogleアカウントおよびLINEアカウントを使用したワンクリックログイン。
*   **パスワードリセット**: パスワードを忘れた場合の再設定フロー。
*   **プロフィール管理**: ユーザー情報の閲覧・編集 (名前、連絡先など)。

### 3.2 予約管理 (Booking Management)
*   **カレンダー表示**: 月/週/日単位での予約状況の可視化。ドラッグ＆ドロップでの直感的な操作（管理者向け）。
*   **予約リスト**: 全予約の一覧表示、ステータス（未確定、確定、完了、キャンセルなど）によるフィルタリング。
*   **新規予約作成**: 管理画面からの代理予約登録、および顧客用の予約フォーム（日時選択、メニュー選択）。
*   **予約詳細**: 顧客情報、サービス内容、金額、担当スタッフ等の詳細確認。

### 3.3 顧客管理 (CRM)
*   **顧客一覧**: 登録顧客の検索・一覧表示。
*   **顧客詳細 (CRM)**: 顧客ごとの基本情報、過去の利用履歴、メモ（特記事項）の管理。
*   **LINE連携**: 顧客とのメッセージング連携（通知機能など）。

### 3.4 サービス・メニュー管理
*   **サービス一覧**: 提供サービスの登録・編集・削除。
*   **カテゴリ設定**: サービスをカテゴライズして管理（例: エアコン、キッチン、水回り）。
*   **価格・所要時間設定**: サービスごとの基本料金と標準作業時間の設定。

### 3.5 レポート・分析 (Reports)
*   **ダッシュボード**: 売上推移、予約件数、稼働率などの主要KPIをグラフで可視化。
*   **実績集計**: 期間指定による売上・稼働実績の集計。

## 4. 非機能要件

### 4.1 パフォーマンス
*   SPA (Single Page Application) アーキテクチャにより、高速な画面遷移を実現。
*   データベースクエリの最適化と適切なインデックス設計によるレスポンス維持。

### 4.2 セキュリティ
*   **RLS (Row Level Security)**: Supabaseの行レベルセキュリティを使用し、データアクセスを厳格に制御（例: 顧客は自分のデータのみ参照可能）。
*   **認証**: 堅牢な認証基盤 (Supabase Auth) の利用。

### 4.3 UI/UX
*   **レスポンシブデザイン**: PC、タブレット、スマートフォンなどあらゆるデバイスで最適に表示。
*   **モダンなUI**: Shadcn UIを採用し、直感的で洗練されたインターフェースを提供。

## 5. 技術スタック
*   **Frontend**: React, TypeScript, Vite, Tailwind CSS, Shadcn UI
*   **Backend**: Supabase (PostgreSQL, Auth, Edge Functions, Storage, Realtime)
*   **State Management**: TanStack Query, React Context
*   **Infrastructure**: Vercel (Frontend Hosting), Supabase (Backend Hosting)

## 6. ドキュメント体系
*   `docs/architecture.md`: アーキテクチャ詳細
*   `docs/deployment.md`: デプロイ手順
*   `docs/line_integration_guide.md`: LINE連携ガイド
